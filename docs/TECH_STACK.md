# Voice KY Assistant v2 技術構成資料

本プロジェクト「一人KY活動支援アプリ (Voice KY v2)」で採用した技術スタックと、その選定理由を記述します。

## 🏗️ 全体アーキテクチャ

**「サーバーレス・エッジコンピューティング」** を全面的に採用しました。ユーザーの近くで動作する高速なレスポンスと、運用コストの最小化（Infra-as-Code）を両立させています。

---

## 🔧 技術スタック詳細

### 1. フロントエンド (UI/UX)

| 技術 | 選定理由 |
| :--- | :--- |
| **React 19** | 最新のモダンWeb標準。コンポーネント指向による高い再利用性と、宣言的UIによる状態管理のしやすさ。 |
| **Vite** | 従来のWebpackに比べて圧倒的に高速なビルドツール。開発体験（DX）を最大化し、試行錯誤のサイクルを高速化するため。 |
| **TypeScript** | 静的型付けにより「実行時エラー」を未然に防ぐ。コードの品質担保と保守性の向上に必須。 |
| **Tailwind CSS** | ユーティリティファーストCSS。デザインシステムを高速に構築し、CSSファイル肥大化を防ぐため。 |
| **Zustand** | Reduxより軽量でボイラープレートが少ない状態管理ライブラリ。セッション情報の保持に最適。 |

### 2. バックエンド & インフラ (Edge)

| 技術 | 選定理由 |
| :--- | :--- |
| **Cloudflare Pages** | 静的サイトホスティングとAPI（Functions）を統合管理できるプラットフォーム。世界中のエッジロケーションから配信され、爆速。 |
| **Cloudflare Workers** | サーバー管理不要のFaaS。Node.jsではなくWeb標準APIベースで動作するため起動時間が0ミリ秒に近い（コールドスタートがない）。 |
| **Hono** | Cloudflare Workersのために作られた超軽量Webフレームワーク。Expressライクな書き味で、エッジ環境でも高速に動作する。 |

### 3. AI & 機能 (Core Features)

| 技術 | 選定理由 |
| :--- | :--- |
| **OpenAI GPT-4o mini** | 「安全性」と「コスト」のバランスが最高。現場作業員との対話において十分な賢さを持ちつつ、APIコストを低く抑えられる。 |
| **Web Speech API** | ブラウザ標準の音声認識。外部API（Google Cloud STT等）を使わず、追加コストなしで音声入力を実現するため。 |
| **@react-pdf/renderer** | サーバー負荷をかけずに**クライアントサイド（ブラウザ）だけで**PDFを生成・出力するため。 |

### 4. 品質保証 (Testing)

| 技術 | 選定理由 |
| :--- | :--- |
| **Playwright** | ブラウザ操作を自動化するE2Eテスト。iPhone（WebKit）やPC（Chromium）の挙動を実機に近い環境で検証するため。 |
| **Vitest** | Viteネイティブの高速ユニットテストランナー。ロジック（Storeなど）の堅牢性を担保するため。 |

---

## 🎯 この構成のメリット

1. **運用コストがほぼゼロ**: サーバー代がかからず、アクセスがあった分だけの従量課金（または無料枠内）。
2. **爆速レスポンス**: 東京だけでなく世界中のエッジサーバーから配信されるため、地方の現場でも遅延が少ない。
3. **高セキュリティ**: APIキーはバックエンド（Workers）で隠蔽され、フロントエンドには露出しない。

この技術選定により、**「現場でサクサク動く」「低コストで運用できる」「安全」** なアプリを実現しました。
