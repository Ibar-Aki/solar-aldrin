# 音声認識 技術検証計画書

## 概要

Voice KY AssistantにおけるWeb Speech APIの音声認識精度と実用性を検証するための計画。
建設現場特有の環境（騒音、方言、専門用語）での認識精度を確認し、必要に応じて改善策を検討する。

---

## 1. 検証目的

1. **基本性能確認**: 標準的な環境での音声認識精度を測定
2. **現場環境テスト**: 騒音下でも実用レベルで認識できるか確認
3. **専門用語対応**: 建設現場特有の用語が認識されるか確認
4. **iOS Safari互換性**: 対象デバイス（iPhone SE）での動作確認

---

## 2. テスト環境

### ハードウェア

| デバイス | OS | ブラウザ |
| -------- | -- | -------- |
| iPhone SE (第3世代) | iOS 17+ | Safari |
| iPhone 13 | iOS 17+ | Safari |
| Windows PC | Windows 11 | Chrome/Edge |
| Android (参考) | Android 13+ | Chrome |

### ソフトウェア

- Web Speech API (SpeechRecognition)
- `lang: 'ja-JP'`
- `continuous: false` + 自動再開ロジック
- `interimResults: true`

---

## 3. テストケース

### TC-01: 静音環境での基本認識

| 項目 | 内容 |
| ---- | ---- |
| 環境 | オフィス、静音（40dB以下） |
| 距離 | 端末から30cm |
| 入力 | 標準的な日本語フレーズ（10種） |
| 期待結果 | 90%以上正確に認識 |

**テストフレーズ:**

1. 「足場から落ちる」
2. 「工具を落とす」
3. 「安全帯を使う」
4. 「指差呼称ヨシ」
5. 「今日は暑いから熱中症に注意」
6. 「鉄骨が倒れてくる」
7. 「脚立が滑る」
8. 「開口部に落ちる」
9. 「玉掛け作業中に」
10. 「声かけを忘れない」

### TC-02: 騒音環境での認識

| 項目 | 内容 |
| ---- | ---- |
| 環境 | 擬似騒音再生（工事現場BGM等）、60-70dB |
| 距離 | 端末から20cm（近接） |
| 入力 | TC-01と同じフレーズ |
| 期待結果 | 70%以上正確に認識 |

### TC-03: 専門用語認識

| 項目 | 内容 |
| ---- | ---- |
| 環境 | 静音 |
| 入力 | 現場特有の専門用語（10種） |
| 期待結果 | 50%以上認識（認識不可の場合は代替表現を検討） |

**テストフレーズ:**

1. 「ヒヤリハット」
2. 「安全帯（あんぜんたい）」
3. 「フルハーネス」
4. 「KY活動」
5. 「玉掛け（たまがけ）」
6. 「開口部（かいこうぶ）」
7. 「墜落制止用器具」
8. 「指差呼称（しさこしょう）」
9. 「とび工」
10. 「鳶足場（とびあしば）」

### TC-04: 連続対話テスト

| 項目 | 内容 |
| ---- | ---- |
| 環境 | 静音 |
| シナリオ | KY活動の一連の流れ（挨拶〜完了まで） |
| 期待結果 | 途中で認識が切れずに完了できる |

---

## 4. 評価基準

### 認識精度

| 評価 | 基準 |
| ---- | ---- |
| ◎ 優秀 | 90%以上 |
| ○ 良好 | 70-89% |
| △ 改善要 | 50-69% |
| × 不可 | 50%未満 |

### 応答速度

| 評価 | 基準 |
| ---- | ---- |
| ◎ | 認識完了まで2秒以内 |
| ○ | 2-4秒 |
| △ | 4-6秒 |
| × | 6秒超 |

---

## 5. 改善策オプション

認識精度が不十分な場合の対応策：

### A. UIフォールバック強化

- テキスト入力欄を常に表示し、音声が使えない場合の代替を明確化
- 「認識されにくいフレーズ」一覧をヘルプに掲載

### B. 専門用語辞書（クライアント側）

- 認識結果を後処理で変換（例: 「たまかけ」→「玉掛け」）
- 定型フレーズのサジェスト

### C. 外部STTサービスへの移行

- Google Cloud Speech-to-Text
- Whisper API (OpenAI)
- カスタム語彙対応が可能だが、コスト増

---

## 6. テスト実施手順

1. **準備**
   - 開発サーバー起動（`npm run dev`）
   - 対象デバイスでアプリにアクセス
   - マイク許可を付与

2. **テスト実行**
   - 各テストケースのフレーズを順番に発話
   - 認識結果をスプレッドシートに記録

3. **結果集計**
   - 正解数 / 総数 で精度を算出
   - 誤認識パターンを分析

4. **レポート作成**
   - 認識精度サマリー
   - 問題点と改善提案

---

## 7. スケジュール案

| 日程 | 作業内容 |
| ---- | -------- |
| Day 1 | テスト環境準備、TC-01実施 |
| Day 2 | TC-02, TC-03実施 |
| Day 3 | TC-04実施、結果集計 |
| Day 4 | レポート作成、改善策検討 |
