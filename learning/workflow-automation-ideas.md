# ワークフロー自動化のアイデア集

日々の開発業務には、「決まった手順の繰り返し」が多く存在します。
これらを `.agent/workflows` に定義することで、AIエージェントに代行させたり、半自動化したりすることができます。

## 既存のワークフロー（例）

* **`/build-excel-macro`**: `.bas` ファイルからExcelマクロファイル (`.xlsm`) をビルドする。
* **`/audit-external-code`**: 外部コードのセキュリティ監査を行う。
* **`/safe-delete`**: ファイルをゴミ箱へ移動して安全に削除する。

## 新規ワークフローのアイデア

### 1. 開発・テスト支援

* **`/test-all`**:
  * Lint、Type Check、Unit Test、E2E Test を一括で実行し、問題があればレポートする。
  * コマンド: `npm run lint && npm run build && npm run test:e2e`
* **`/setup-env`**:
  * 新しい開発環境（`.env` ファイルなど）のセットアップを対話形式で行う。
* **`/verify-fix`**:
  * 修正を行った後、関連するテストのみを抽出して実行する（`git diff` から影響範囲を特定）。

### 2. デプロイ・リリース

* **`/deploy-staging`**:
  * Current Branch をステージング環境（Cloudflare Workers）にデプロイし、動作確認URLを取得する。
* **`/release-note-gen`**:
  * 前回のタグからのコミットログを解析し、機能追加・バグ修正・既知の問題をまとめたリリースノートを自動生成する。

### 3. ドキュメント管理

* **`/update-docs`**:
  * コードの変更（関数の追加・変更）を検知し、APIドキュメントやJSDocを更新・追記する。
* **`/arch-diagram-gen`**:
  * ディレクトリ構造や依存関係を解析し、Mermaid記法のアーキテクチャ図を更新する。

### 4. 特定タスクの自動化

* **`/add-feature-template`**:
  * 新しい機能を追加する際に、必要なファイル群（Component, Store, Test, Schema）の雛形を一括生成する。
* **`/cleanup-logs`**:
  * 開発中に埋め込んだ `console.log` や一時的なコメントを一括削除する。

## ワークフロー定義のコツ

* **`// turbo` アノテーション**: 安全なコマンド（読み取り系やビルド系）には `// turbo` を付けて、ユーザー承認なしで高速実行できるようにする。
* **明確なSteps**: 手順は番号付きリストで具体的に書く。「確認する」のような抽象的な指示ではなく、「`xxx` コマンドを実行し、出力に `Error` が含まれていないか確認する」のように記述する。
