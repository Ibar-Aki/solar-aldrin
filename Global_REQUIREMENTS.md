# Voice KY Assistant: Global Requirements

本ドキュメントは、プロジェクト全体を通じた**中核的な要求事項**を定義し、各フェーズでの達成状況を追跡します。

## 1. 機能要件 (Functional Requirements)

| ID | 要件名 | 概要 | Phase 1 (Legacy) | Phase 2 (Modern) |
| :--- | :--- | :--- | :--- | :--- |
| **FR-01** | **音声対話KY** | 音声でのやり取りだけでKY記録が完了すること。 | ⚠️ 認識精度・UX低 | ✅ **専用UI/調整済** |
| **FR-02** | **深掘り質問** | 「ヨシ！」等の抽象的な回答に対し、具体化を促す質問を行うこと。 | ⚠️ 定型・ループ発生 | ✅ **構造化プロンプト** |
| **FR-03** | **PDF出力** | 監査に耐えうる形式でKY記録票を出力できること。 | ⚠️ クライアント負荷大 | ✅ **サーバーレス生成** |
| **FR-04** | **天候連動** | 現在地の天候を取得し、リスク指摘に反映すること。 | ⚠️ 不安定 | ✅ **API連携強化** |
| **FR-05** | **活動履歴** | 過去のKY記録を参照・再出力できること。 | ❌ 実装なし | 📅 Phase 2.3予定 |

## 2. 非機能要件 (Non-Functional Requirements)

| ID | 要件名 | 基準値 | Phase 1 実測 | Phase 2 目標/実測 |
| :--- | :--- | :--- | :--- | :--- |
| **NFR-01** | **応答速度** | 音声入力完了後 3秒以内 | ❌ 5〜8秒 | ✅ **3秒以内 (Streaming)** |
| **NFR-02** | **操作性** | 片手・手袋での誤操作防止 | ❌ 標準フォーム | ✅ **手袋モードUI** |
| **NFR-03** | **可用性** | 99.9% (業務時間内) | ❌ 無料枠制限あり | ✅ **Cloudflare Edge** |
| **NFR-04** | **セキュリティ** | APIキーの完全隠蔽 | ❌ クライアント露出 | ✅ **Backend Proxy** |

## 3. 制約事項 (Constraints)

- **デバイス**: iPhone SE (第2世代以降) / Safari
- **回線**: 4G/5G (建設現場、一部不安定なエリアあり)
- **コスト**: ランニングコスト月額1,000円以内 (API利用料含む)

## 参照

詳細な仕様については、各フェーズのドキュメントを参照してください。

- [Phase 2 詳細要件](apps/v2-modern/docs/00_planning/04_要件定義書_REQUIREMENTS.md)
- [Phase 1 要件 (Archive)](apps/v1-legacy/docs/01_planning/02_要件定義書_Requirements.md)
