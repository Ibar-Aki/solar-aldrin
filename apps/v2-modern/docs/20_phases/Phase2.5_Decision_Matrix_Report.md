# Phase 2.5 レポート（体験速度・信頼性・可観測性）

参照: `./Phase2.5_Decision_Matrix.md`
作成日: 2026-01-30

---

## 1. エグゼクティブサマリ

- **総合推奨度**: **A**（運用の土台として必須）
- **主な価値**: 体感速度の向上、障害の検知、品質の定量化
- **主な懸念**: SSEの安定性、監視/ログによる情報過多

---

## 2. 観点別レビュー（多角的評価）

### 2.1 価値・現場効果

- 体感速度はユーザー満足度を大きく左右する。
- 監視/ログ/KPIがないと改善効果が判断できない。

### 2.2 UX（体験）

- SSEストリーミングは心理的待ち時間を短縮しやすい。
- 過度な計測がUI遅延を生む可能性に注意。

### 2.3 技術・実装

- SSEはWorkers側とフロントの双方で実装が必要。
- キャッシュ/ログ/計測は低コストだが設計の質が重要。

### 2.4 運用・コスト

- SentryやLogsは運用の必須基盤だが、アラート設計が必要。
- KPI収集は「何を測るか」を先に明確化する必要がある。

### 2.5 リスク・品質

- SSEが不安定だと体験が逆に悪化する恐れ。
- ログ/計測でPIIが混ざるリスクがあるため設計とフィルタが必須。

---

## 3. 機能別評価（詳細）

| ID | 機能 | 価値 | 実装コスト | 運用負荷 | 主なリスク | 推奨度 | コメント |
| --- | --- | --- | --- | --- | --- | --- | --- |
| OPS-01 | SSEストリーミング | 高 | 中 | 中 | 接続不安定 | **B** | 効果大だが安定性検証が必須。 |
| OPS-02 | 天候APIキャッシュ | 中 | 低 | 低 | 反映遅延 | **A** | 低コストで効果が見込める。 |
| OPS-03 | Sentry導入 | 高 | 低〜中 | 中 | 無料枠制限 | **A** | 本番運用に必須。 |
| OPS-04 | 構造化ログ | 中 | 低 | 中 | ログ量過多 | **A** | 障害調査効率を大幅改善。 |
| OPS-05 | KPI収集 | 中 | 中 | 中 | 定義曖昧 | **C** | まず基本指標から段階導入。 |
| OPS-06 | Web Vitals計測 | 中 | 低 | 低 | 計測誤差 | **B** | 低コストで品質の可視化。 |

---

## 4. 推奨実装順（MVP → 拡張）

1. **OPS-02**: 天候APIキャッシュ
2. **OPS-03**: Sentry導入
3. **OPS-04**: 構造化ログ
4. **OPS-06**: Web Vitals計測
5. **OPS-01**: SSEストリーミング
6. **OPS-05**: KPI収集（段階的）

---

## 5. 成果測定（KPI例）

- 応答までの体感待ち時間（ユーザーアンケート）
- LCP/FID/CLSの推移
- エラー率（Sentry）と再現率
- セッション完了率の改善

---

## 6. リスクと対策

- **SSE不安定**: フォールバックで通常レスポンスに切替
- **ログ/計測の過剰**: 重要イベントに絞る、サンプリングを活用
- **PII混入**: マスキング・匿名化の設計を徹底

---

## 7. 結論

Phase 2.5は「体験速度」と「運用品質」の土台であり、**OPS-02/03/04/06の先行実装**が最優先です。SSEは効果が大きい分、安定性検証を前提に段階導入が望ましいです。
